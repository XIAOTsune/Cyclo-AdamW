# Cyclo-AdamW 验证计划

## 1. 实验设置

### 1.1 数据集
- **合成数据**:
    - **二次碗 (Quadratic Bowl)**: $f(x, y) = x^2 + y^2$ (凸优化健全性检查)。
    - **Rosenbrock 函数**: $f(x, y) = (a - x)^2 + b(y - x^2)^2$ (非凸，标准优化基准)。
- **真实世界数据**:
    - **Fashion-MNIST / CIFAR-10**: 图像分类任务。
    - 模型: 简单 CNN (LeNet-5 变体) 或 ResNet-18 (用于 CIFAR)。

### 1.2 基线 (Baselines)
- **AdamW**: 标准基线。PyTorch 默认实现。
- **SGD**: 带动量的随机梯度下降。

## 2. 指标
- **训练 Loss 曲线**: 收敛速度。
- **验证准确率**: 最终泛化性能。
- **Loss 稳定性**: 后期 Loss 的方差。
- **步长动态**: 绘制随时间变化的有效学习率，观察“摆线因子”的作用。

## 3. 测试用例

### 测试用例 A: 健全性检查 (凸函数)
- **目标**: 确认基本收敛性。
- **配置**:
    - 任务: 最小化 $x^2 + y^2$。
    - 步数: 1000。
    - 预期: Loss $\to$ 0。

### 测试用例 B: 逃离局部极小值 (非凸)
- **目标**: 检查动态步长是否有助于逃离平坦区域或局部极小值。
- **配置**:
    - 任务: Rosenbrock 函数。
    - 起点: $(-1.2, 1.0)$ (标准困难起点)。

### 测试用例 C: 泛化能力 (CIFAR-10)
- **目标**: 验证在真实数据上的性能。
- **配置**:
    - 模型: ResNet-18。
    - Epochs: 50。
    - Batch Size: 128。
    - 对比: Cyclo-AdamW vs AdamW。

### 测试用例 D: 热启动机制验证
- **目标**: 确认前 N 步是否正确退化为 AdamW，以及 $L_{initial}$ 是否正确校准。
- **配置**:
    - 设置 `warmup_steps = 100`。
    - 检查 step 0-99 的 `phi` 是否恒为 1.0。
    - 检查 step 100 后的 `phi` 是否开始根据 Loss 变化。

## 4. 超参数调优计划
- **$h_{DL}$ (量子阈值)**: 测试值 `[1e-6, 1e-5, 1e-4, 0]`.
    - 假设: 太高 -> 停滞; 太低 -> 噪声。
- **$\alpha$ (Loss EMA 衰减)**: 测试值 `[0.9, 0.99]`.
    - 假设: 影响摆线因子的稳定性。
- **Warmup Steps**: 测试值 `[0, 1000]`.
    - 验证对初期不稳定的鲁棒性。

## 5. 验证结果总结 (2026-02-07)

### Rosenbrock 函数
- **AdamW**: Final Loss 3.9495
- **Cyclo-AdamW**: Final Loss **3.3123** (-16%)
- 结论: 验证了非凸环境下的加速收敛能力。

### MNIST 分类 (5 Epochs)
- **AdamW**: 98.77% Accuracy
- **Cyclo-AdamW**: **99.00%** Accuracy (+0.23%)
- 结论: 验证了深度学习任务中的稳定性和泛化优势。
